# 拼多多商品标题采集工具

## 功能特点

- **智能选择器识别**: 自动检测最适合的CSS选择器来获取商品标题
- **自动滚动加载**: 自动滚动页面加载更多商品
- **进度保存**: 每采集10个标题自动保存进度，避免数据丢失
- **错误恢复**: 完善的异常处理和数据恢复机制
- **用户友好**: 交互式参数输入，支持自定义搜索关键词和采集数量

## 使用方法

### 1. 安装依赖

确保已安装DrissionPage:

```bash
pip install -e .
```

### 2. 运行脚本

```bash
python pdd_scraper.py
```

### 3. 参数设置

脚本会提示输入：
- **搜索关键词**: 默认为"妈妈包"，可以输入任何关键词
- **采集数量**: 默认为50，最大限制500

### 4. 运行过程

1. 脚本会自动启动Chrome浏览器
2. 访问拼多多搜索页面
3. 智能识别商品标题选择器
4. 自动滚动页面加载更多商品
5. 实时显示采集进度
6. 定期保存进度文件

## 输出文件

脚本会生成以下文件：

- `pdd_titles_{关键词}_{时间戳}.json`: 最终结果文件
- `pdd_progress_{关键词}_{时间戳}.json`: 进度保存文件（每10个标题保存一次）
- `pdd_titles_emergency_{关键词}_{时间戳}.json`: 错误恢复文件（发生异常时保存已采集数据）

## 文件格式

JSON格式输出示例：

```json
{
  "search_keyword": "妈妈包",
  "total_count": 50,
  "titles": [
    "妈妈包时尚双肩包女包",
    "妈妈包大容量手提包",
    ...
  ]
}
```

## 注意事项

1. **浏览器路径**: 脚本默认使用 `C:\Program Files\Google\Chrome\Application\chrome.exe`，如需修改请编辑脚本中的 `co.set_browser_path()` 行

2. **网络环境**: 需要稳定的网络连接，建议使用较快的网络

3. **验证码**: 如果遇到验证码，脚本会暂停等待手动处理

4. **采集限制**: 单次最多采集500个标题，避免对服务器造成过大压力

5. **数据准确性**: 由于网页结构可能变化，选择器会自动适应，但仍建议定期检查

## 故障排除

### 常见问题

1. **找不到浏览器**
   - 检查Chrome浏览器安装路径
   - 或安装其他Chromium内核浏览器

2. **无法加载页面**
   - 检查网络连接
   - 尝试更换DNS或使用VPN

3. **选择器失效**
   - 网页结构可能已更新
   - 脚本会自动尝试多种选择器

4. **采集数量不足**
   - 增加滚动次数
   - 检查搜索关键词是否有足够结果

## 技术实现

- 使用DrissionPage进行浏览器自动化
- 智能CSS选择器检测算法
- 多重错误处理和恢复机制
- 实时进度监控和保存

## 版本信息

- v2.0: 智能选择器识别，进度保存，错误恢复
- 基于DrissionPage框架开发
